<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #d20035; -webkit-text-stroke: #d20035}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #9a9a9a; -webkit-text-stroke: #9a9a9a; min-height: 14.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #9a9a9a; -webkit-text-stroke: #000000}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #646464; -webkit-text-stroke: #646464}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #87869a; -webkit-text-stroke: #87869a}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #9a9a9a; -webkit-text-stroke: #646464}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #0e72a4; -webkit-text-stroke: #0e72a4}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #9a9a9a; -webkit-text-stroke: #20507e}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #20507e; -webkit-text-stroke: #20507e}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px 'Courier New'; color: #9a9a9a; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none; color: #646464; -webkit-text-stroke: 0px #646464}
    span.s2 {font-kerning: none; color: #343434; -webkit-text-stroke: 0px #000000}
    span.s3 {font-kerning: none}
    span.s4 {font-kerning: none; color: #20507e; -webkit-text-stroke: 0px #20507e}
    span.s5 {font-kerning: none; color: #d20035; -webkit-text-stroke: 0px #d20035}
    span.s6 {font-kerning: none; color: #118987; -webkit-text-stroke: 0px #118987}
    span.s7 {font-kerning: none; color: #87869a; -webkit-text-stroke: 0px #87869a}
    span.s8 {font-kerning: none; color: #9a9a9a; -webkit-text-stroke: 0px #000000}
    span.s9 {font-kerning: none; color: #646464}
    span.s10 {font-kerning: none; -webkit-text-stroke: 0px #000000}
    span.s11 {font-kerning: none; color: #20507e}
    span.s12 {font-kerning: none; color: #0e72a4; -webkit-text-stroke: 0px #0e72a4}
    td.td1 {width: 1507.8px; margin: 0.5px 0.5px 0.5px 0.5px; padding: 0.0px 0.0px 0.0px 10.0px}
    td.td2 {width: 1507.8px; background-color: #ffffff; margin: 0.5px 0.5px 0.5px 0.5px; padding: 0.0px 0.0px 0.0px 10.0px}
  </style>
</head>
<body>
<table cellspacing="0" cellpadding="0">
  <tbody>
    <tr>
      <td valign="baseline" class="td1">
        <p class="p1"><span class="s1">&lt;</span><span class="s2">!DOCTYPE HTML PUBLIC </span><span class="s3">"-//W3C//DTD HTML 4.0 Transitional//EN"</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s1">&lt;</span><span class="s3">HTML</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space"> </span></span><span class="s1">&lt;</span><span class="s3">HEAD</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">TITLE</span><span class="s1">&gt;</span><span class="s3"> </span><span class="s4"><b>New</b></span><span class="s3"> Document </span><span class="s1">&lt;</span><span class="s3">/TITLE</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">META NAME=</span><span class="s5">"Generator"</span><span class="s3"> CONTENT=</span><span class="s5">"EditPlus"</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">META NAME=</span><span class="s5">"Author"</span><span class="s3"> CONTENT=</span><span class="s5">""</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">META NAME=</span><span class="s5">"Keywords"</span><span class="s3"> CONTENT=</span><span class="s5">""</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">META NAME=</span><span class="s5">"Description"</span><span class="s3"> CONTENT=</span><span class="s5">""</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">style</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>html, body </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>height: </span><span class="s6">100</span><span class="s3">%;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>padding: </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>margin: </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>background: </span><span class="s7">#000;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p4"><span class="s3">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3">canvas </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>position: absolute;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>width: </span><span class="s6">100</span><span class="s3">%;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>height: </span><span class="s6">100</span><span class="s3">%;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p4"><span class="s3">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">/style</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space"> </span></span><span class="s1">&lt;</span><span class="s3">/HEAD</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space"> </span></span><span class="s1">&lt;</span><span class="s3">BODY</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">canvas id=</span><span class="s5">"pinkboard"</span><span class="s1">&gt;&lt;</span><span class="s3">/canvas</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">script</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s7">/*</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>* Settings</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>*/</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3">var settings = </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>particles: </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span>length: <span class="Apple-converted-space">  </span></span><span class="s6">500</span><span class="s8">, </span><span class="s3">// maximum amount of particles</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span>duration: <span class="Apple-converted-space">  </span></span><span class="s6">2</span><span class="s8">, </span><span class="s3">// particle duration in sec</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span>velocity: </span><span class="s6">100</span><span class="s8">, </span><span class="s3">// particle velocity in pixels/sec</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span>effect: </span><span class="s6">-0.75</span><span class="s8">, </span><span class="s3">// play with this for a nice effect</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span>size:<span class="Apple-converted-space">      </span></span><span class="s6">30</span><span class="s8">, </span><span class="s3">// particle size in pixels</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p6"><span class="s9">}</span><span class="s10">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3">/*</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>* RequestAnimationFrame polyfill by Erik Möller</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>*/</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s1">(</span><span class="s4"><b>function</b></span><span class="s1">(){</span><span class="s8">var b=</span><span class="s6">0</span><span class="s8">;var c=</span><span class="s1">[</span><span class="s5">"ms"</span><span class="s8">,</span><span class="s5">"moz"</span><span class="s8">,</span><span class="s5">"webkit"</span><span class="s8">,</span><span class="s5">"o"</span><span class="s1">]</span><span class="s8">;</span><span class="s4"><b>for</b></span><span class="s1">(</span><span class="s8">var a=</span><span class="s6">0</span><span class="s8">;a</span><span class="s1">&lt;</span><span class="s8">c.</span><span class="s3">length</span><span class="s8">&amp;&amp;!window.</span><span class="s3">requestAnimationFrame</span><span class="s8">;++a</span><span class="s1">){</span><span class="s8">window.</span><span class="s3">requestAnimationFrame</span><span class="s8">=window</span><span class="s1">[</span><span class="s8">c</span><span class="s1">[</span><span class="s8">a</span><span class="s1">]</span><span class="s8">+</span><span class="s5">"RequestAnimationFrame"</span><span class="s1">]</span><span class="s8">;window.</span><span class="s3">cancelAnimationFrame</span><span class="s8">=window</span><span class="s1">[</span><span class="s8">c</span><span class="s1">[</span><span class="s8">a</span><span class="s1">]</span><span class="s8">+</span><span class="s5">"CancelAnimationFrame"</span><span class="s1">]</span><span class="s8">||window</span><span class="s1">[</span><span class="s8">c</span><span class="s1">[</span><span class="s8">a</span><span class="s1">]</span><span class="s8">+</span><span class="s5">"CancelRequestAnimationFrame"</span><span class="s1">]}</span><span class="s4"><b>if</b></span><span class="s1">(</span><span class="s8">!window.</span><span class="s3">requestAnimationFrame</span><span class="s1">){</span><span class="s8">window.</span><span class="s3">requestAnimationFrame</span><span class="s8">=</span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s8">h,e</span><span class="s1">){</span><span class="s8">var d=</span><span class="s4"><b>new</b></span><span class="s8"> </span><span class="s3">Date</span><span class="s1">()</span><span class="s8">.</span><span class="s3">getTime</span><span class="s1">()</span><span class="s8">;var f=Math.</span><span class="s3">max</span><span class="s1">(</span><span class="s6">0</span><span class="s8">,</span><span class="s6">16</span><span class="s8">-</span><span class="s1">(</span><span class="s8">d-b</span><span class="s1">))</span><span class="s8">;var g=window.</span><span class="s3">setTimeout</span><span class="s1">(</span><span class="s4"><b>function</b></span><span class="s1">(){</span><span class="s3">h</span><span class="s1">(</span><span class="s8">d+f</span><span class="s1">)}</span><span class="s8">,f</span><span class="s1">)</span><span class="s8">;b=d+f;</span><span class="s4"><b>return</b></span><span class="s8"> g</span><span class="s1">}}</span><span class="s4"><b>if</b></span><span class="s1">(</span><span class="s8">!window.</span><span class="s3">cancelAnimationFrame</span><span class="s1">){</span><span class="s8">window.</span><span class="s3">cancelAnimationFrame</span><span class="s8">=</span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s8">d</span><span class="s1">){</span><span class="s3">clearTimeout</span><span class="s1">(</span><span class="s8">d</span><span class="s1">)}}}())</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3">/*</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>* Point class</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>*/</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3">var Point = </span><span class="s1">(</span><span class="s4"><b>function</b></span><span class="s1">()</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p8"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s11"><b>function</b></span><span class="s10"> </span><span class="s12">Point</span><span class="s1">(</span><span class="s10">x, y</span><span class="s1">)</span><span class="s10"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">x</span><span class="s3"> = </span><span class="s1">(</span><span class="s3">typeof x !== </span><span class="s5">'undefined'</span><span class="s1">)</span><span class="s3"> ? x </span><span class="s1">:</span><span class="s3"> </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">y</span><span class="s3"> = </span><span class="s1">(</span><span class="s3">typeof y !== </span><span class="s5">'undefined'</span><span class="s1">)</span><span class="s3"> ? y </span><span class="s1">:</span><span class="s3"> </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">  </span>Point.</span><span class="s3">prototype</span><span class="s8">.</span><span class="s3">clone</span><span class="s8"> = </span><span class="s4"><b>function</b></span><span class="s1">()</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3"><b>return</b></span><span class="s8"> </span><span class="s3"><b>new</b></span><span class="s8"> </span><span class="s12">Point</span><span class="s1">(</span><span class="s3"><b>this</b></span><span class="s8">.</span><span class="s12">x</span><span class="s8">, </span><span class="s3"><b>this</b></span><span class="s8">.</span><span class="s12">y</span><span class="s1">)</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>Point.</span><span class="s12">prototype</span><span class="s3">.</span><span class="s12">length</span><span class="s3"> = </span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s3">length</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">typeof length == </span><span class="s5">'undefined'</span><span class="s1">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>return</b></span><span class="s3"> Math.</span><span class="s12">sqrt</span><span class="s1">(</span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">x</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">x</span><span class="s3"> + </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">y</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">y</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s8">.</span><span class="s3">normalize</span><span class="s1">()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">x</span><span class="s3"> *= length;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">y</span><span class="s3"> *= length;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3"><b>return</b></span><span class="s8"> </span><span class="s3"><b>this</b></span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">  </span>Point.</span><span class="s3">prototype</span><span class="s8">.</span><span class="s3">normalize</span><span class="s8"> = </span><span class="s4"><b>function</b></span><span class="s1">()</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var length = </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">length</span><span class="s1">()</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">x</span><span class="s3"> /= length;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">y</span><span class="s3"> /= length;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3"><b>return</b></span><span class="s8"> </span><span class="s3"><b>this</b></span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s4"><b>return</b></span><span class="s3"> Point;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p4"><span class="s3">})()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3">/*</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>* Particle class</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>*/</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3">var Particle = </span><span class="s1">(</span><span class="s4"><b>function</b></span><span class="s1">()</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3"><b>function</b></span><span class="s8"> </span><span class="s12">Particle</span><span class="s1">()</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s8">.</span><span class="s3">position</span><span class="s8"> = </span><span class="s4"><b>new</b></span><span class="s8"> </span><span class="s3">Point</span><span class="s1">()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s8">.</span><span class="s3">velocity</span><span class="s8"> = </span><span class="s4"><b>new</b></span><span class="s8"> </span><span class="s3">Point</span><span class="s1">()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s8">.</span><span class="s3">acceleration</span><span class="s8"> = </span><span class="s4"><b>new</b></span><span class="s8"> </span><span class="s3">Point</span><span class="s1">()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">age</span><span class="s3"> = </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>Particle.</span><span class="s12">prototype</span><span class="s3">.</span><span class="s12">initialize</span><span class="s3"> = </span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s3">x, y, dx, dy</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">position</span><span class="s3">.</span><span class="s12">x</span><span class="s3"> = x;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">position</span><span class="s3">.</span><span class="s12">y</span><span class="s3"> = y;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">velocity</span><span class="s3">.</span><span class="s12">x</span><span class="s3"> = dx;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">velocity</span><span class="s3">.y = dy;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s8">.</span><span class="s3">acceleration</span><span class="s8">.</span><span class="s3">x</span><span class="s8"> = dx </span><span class="s1">*</span><span class="s8"> settings.</span><span class="s3">particles</span><span class="s8">.</span><span class="s3">effect</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s8">.</span><span class="s3">acceleration</span><span class="s8">.</span><span class="s3">y</span><span class="s8"> = dy </span><span class="s1">*</span><span class="s8"> settings.</span><span class="s3">particles</span><span class="s8">.</span><span class="s3">effect</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">age</span><span class="s3"> = </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>Particle.</span><span class="s12">prototype</span><span class="s3">.</span><span class="s12">update</span><span class="s3"> = </span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s3">deltaTime</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">position</span><span class="s3">.</span><span class="s12">x</span><span class="s3"> += </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">velocity</span><span class="s3">.</span><span class="s12">x</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> deltaTime;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">position</span><span class="s3">.</span><span class="s12">y</span><span class="s3"> += </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">velocity</span><span class="s3">.y </span><span class="s1">*</span><span class="s3"> deltaTime;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">velocity</span><span class="s3">.</span><span class="s12">x</span><span class="s3"> += </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">acceleration</span><span class="s3">.</span><span class="s12">x</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> deltaTime;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">velocity</span><span class="s3">.y += </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">acceleration</span><span class="s3">.</span><span class="s12">y</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> deltaTime;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">age</span><span class="s3"> += deltaTime;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>Particle.</span><span class="s12">prototype</span><span class="s3">.</span><span class="s12">draw</span><span class="s3"> = </span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s3">context, image</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3"><b>function</b></span><span class="s8"> </span><span class="s12">ease</span><span class="s1">(</span><span class="s8">t</span><span class="s1">)</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>return</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">--t</span><span class="s1">)</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> t </span><span class="s1">*</span><span class="s3"> t + </span><span class="s6">1</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var size = image.</span><span class="s12">width</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> </span><span class="s12">ease</span><span class="s1">(</span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">age</span><span class="s3"> / settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">duration</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>context.</span><span class="s12">globalAlpha</span><span class="s3"> = </span><span class="s6">1</span><span class="s3"> - </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">age</span><span class="s3"> / settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">duration</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>context.</span><span class="s12">drawImage</span><span class="s1">(</span><span class="s3">image, </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">position</span><span class="s3">.</span><span class="s12">x</span><span class="s3"> - size / </span><span class="s6">2</span><span class="s3">, </span><span class="s4"><b>this</b></span><span class="s3">.</span><span class="s12">position</span><span class="s3">.</span><span class="s12">y</span><span class="s3"> - size / </span><span class="s6">2</span><span class="s3">, size, size</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s4"><b>return</b></span><span class="s3"> Particle;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p4"><span class="s3">})()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3">/*</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>* ParticlePool class</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>*/</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3">var ParticlePool = </span><span class="s1">(</span><span class="s4"><b>function</b></span><span class="s1">()</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>var particles,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>firstActive = </span><span class="s6">0</span><span class="s3">,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>firstFree <span class="Apple-converted-space">  </span>= </span><span class="s6">0</span><span class="s3">,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>duration<span class="Apple-converted-space">    </span>= settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">duration</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s4"><b>function</b></span><span class="s8"> </span><span class="s3">ParticlePool</span><span class="s1">(</span><span class="s8">length</span><span class="s1">)</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// create and populate particle pool</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>particles = </span><span class="s4"><b>new</b></span><span class="s3"> </span><span class="s12">Array</span><span class="s1">(</span><span class="s3">length</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>for</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">var i = </span><span class="s6">0</span><span class="s3">; i </span><span class="s1">&lt;</span><span class="s3"> particles.</span><span class="s12">length</span><span class="s3">; i++</span><span class="s1">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>particles</span><span class="s1">[</span><span class="s3">i</span><span class="s1">]</span><span class="s3"> = </span><span class="s4"><b>new</b></span><span class="s3"> </span><span class="s12">Particle</span><span class="s1">()</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>ParticlePool.</span><span class="s12">prototype</span><span class="s3">.</span><span class="s12">add</span><span class="s3"> = </span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s3">x, y, dx, dy</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>particles</span><span class="s1">[</span><span class="s3">firstFree</span><span class="s1">]</span><span class="s3">.</span><span class="s12">initialize</span><span class="s1">(</span><span class="s3">x, y, dx, dy</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// handle circular queue</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>firstFree++;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">firstFree <span class="Apple-converted-space">  </span>== particles.</span><span class="s12">length</span><span class="s1">)</span><span class="s3"> firstFree <span class="Apple-converted-space">  </span>= </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">firstActive == firstFree <span class="Apple-converted-space">      </span></span><span class="s1">)</span><span class="s3"> firstActive++;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">firstActive == particles.</span><span class="s12">length</span><span class="s1">)</span><span class="s3"> firstActive = </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>ParticlePool.</span><span class="s12">prototype</span><span class="s3">.</span><span class="s12">update</span><span class="s3"> = </span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s3">deltaTime</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var i;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// update active particles</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">firstActive </span><span class="s1">&lt;</span><span class="s3"> firstFree</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>for</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">i = firstActive; i </span><span class="s1">&lt;</span><span class="s3"> firstFree; i++</span><span class="s1">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>particles</span><span class="s1">[</span><span class="s3">i</span><span class="s1">]</span><span class="s3">.</span><span class="s12">update</span><span class="s1">(</span><span class="s3">deltaTime</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">firstFree </span><span class="s1">&lt;</span><span class="s3"> firstActive</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>for</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">i = firstActive; i </span><span class="s1">&lt;</span><span class="s3"> particles.</span><span class="s12">length</span><span class="s3">; i++</span><span class="s1">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>particles</span><span class="s1">[</span><span class="s3">i</span><span class="s1">]</span><span class="s3">.</span><span class="s12">update</span><span class="s1">(</span><span class="s3">deltaTime</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>for</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">i = </span><span class="s6">0</span><span class="s3">; i </span><span class="s1">&lt;</span><span class="s3"> firstFree; i++</span><span class="s1">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>particles</span><span class="s1">[</span><span class="s3">i</span><span class="s1">]</span><span class="s3">.</span><span class="s12">update</span><span class="s1">(</span><span class="s3">deltaTime</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// remove inactive particles</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>while</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">particles</span><span class="s1">[</span><span class="s3">firstActive</span><span class="s1">]</span><span class="s3">.</span><span class="s12">age</span><span class="s3"> </span><span class="s1">&gt;</span><span class="s3">= duration </span><span class="s1">&amp;&amp;</span><span class="s3"> firstActive != firstFree</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>firstActive++;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">firstActive == particles.</span><span class="s12">length</span><span class="s1">)</span><span class="s3"> firstActive = </span><span class="s6">0</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>ParticlePool.</span><span class="s12">prototype</span><span class="s3">.</span><span class="s12">draw</span><span class="s3"> = </span><span class="s4"><b>function</b></span><span class="s1">(</span><span class="s3">context, image</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// draw active particles</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">firstActive </span><span class="s1">&lt;</span><span class="s3"> firstFree</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>for</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">i = firstActive; i </span><span class="s1">&lt;</span><span class="s3"> firstFree; i++</span><span class="s1">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>particles</span><span class="s1">[</span><span class="s3">i</span><span class="s1">]</span><span class="s3">.</span><span class="s12">draw</span><span class="s1">(</span><span class="s3">context, image</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>if</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">firstFree </span><span class="s1">&lt;</span><span class="s3"> firstActive</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>for</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">i = firstActive; i </span><span class="s1">&lt;</span><span class="s3"> particles.</span><span class="s12">length</span><span class="s3">; i++</span><span class="s1">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>particles</span><span class="s1">[</span><span class="s3">i</span><span class="s1">]</span><span class="s3">.</span><span class="s12">draw</span><span class="s1">(</span><span class="s3">context, image</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>for</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">i = </span><span class="s6">0</span><span class="s3">; i </span><span class="s1">&lt;</span><span class="s3"> firstFree; i++</span><span class="s1">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>particles</span><span class="s1">[</span><span class="s3">i</span><span class="s1">]</span><span class="s3">.</span><span class="s12">draw</span><span class="s1">(</span><span class="s3">context, image</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s4"><b>return</b></span><span class="s3"> ParticlePool;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p4"><span class="s3">})()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3">/*</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>* Putting it all together</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s3"><span class="Apple-converted-space"> </span>*/</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s1">(</span><span class="s3"><b>function</b></span><span class="s1">(</span><span class="s8">canvas</span><span class="s1">)</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>var context = canvas.</span><span class="s12">getContext</span><span class="s1">(</span><span class="s5">'2d'</span><span class="s1">)</span><span class="s3">,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>particles = </span><span class="s4"><b>new</b></span><span class="s3"> </span><span class="s12">ParticlePool</span><span class="s1">(</span><span class="s3">settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">length</span><span class="s1">)</span><span class="s3">,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>particleRate = settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">length</span><span class="s3"> / settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">duration</span><span class="s3">, </span><span class="s7">// particles/sec</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>time;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3">// get point on heart with -PI &lt;= t &lt;= PI</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s4"><b>function</b></span><span class="s8"> </span><span class="s3">pointOnHeart</span><span class="s1">(</span><span class="s8">t</span><span class="s1">)</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3"><b>return</b></span><span class="s8"> </span><span class="s3"><b>new</b></span><span class="s8"> </span><span class="s12">Point</span><span class="s1">(</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s6">160</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> Math.</span><span class="s12">pow</span><span class="s1">(</span><span class="s3">Math.</span><span class="s12">sin</span><span class="s1">(</span><span class="s3">t</span><span class="s1">)</span><span class="s3">, </span><span class="s6">3</span><span class="s1">)</span><span class="s3">,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s6">130</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> Math.</span><span class="s12">cos</span><span class="s1">(</span><span class="s3">t</span><span class="s1">)</span><span class="s3"> - </span><span class="s6">50</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> Math.</span><span class="s12">cos</span><span class="s1">(</span><span class="s6">2</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> t</span><span class="s1">)</span><span class="s3"> - </span><span class="s6">20</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> Math.</span><span class="s12">cos</span><span class="s1">(</span><span class="s6">3</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> t</span><span class="s1">)</span><span class="s3"> - </span><span class="s6">10</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> Math.</span><span class="s12">cos</span><span class="s1">(</span><span class="s6">4</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> t</span><span class="s1">)</span><span class="s3"> + </span><span class="s6">25</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3">// creating the particle image using a dummy canvas</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>var image = </span><span class="s1">(</span><span class="s4"><b>function</b></span><span class="s1">()</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var canvas<span class="Apple-converted-space">  </span>= document.</span><span class="s12">createElement</span><span class="s1">(</span><span class="s5">'canvas'</span><span class="s1">)</span><span class="s3">,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>context = canvas.</span><span class="s12">getContext</span><span class="s1">(</span><span class="s5">'2d'</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>canvas.</span><span class="s12">width</span><span class="s3"><span class="Apple-converted-space">  </span>= settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">size</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>canvas.</span><span class="s12">height</span><span class="s3"> = settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">size</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// helper function to create the path</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3"><b>function</b></span><span class="s8"> </span><span class="s12">to</span><span class="s1">(</span><span class="s8">t</span><span class="s1">)</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>var point = </span><span class="s12">pointOnHeart</span><span class="s1">(</span><span class="s3">t</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>point.</span><span class="s12">x</span><span class="s3"> = settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">size</span><span class="s3"> / </span><span class="s6">2</span><span class="s3"> + point.</span><span class="s12">x</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">size</span><span class="s3"> / </span><span class="s6">350</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>point.</span><span class="s12">y</span><span class="s3"> = settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">size</span><span class="s3"> / </span><span class="s6">2</span><span class="s3"> - point.</span><span class="s12">y</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">size</span><span class="s3"> / </span><span class="s6">350</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span></span><span class="s4"><b>return</b></span><span class="s3"> point;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// create the path</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>context.</span><span class="s12">beginPath</span><span class="s1">()</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var t = -Math.</span><span class="s12">PI</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var point = </span><span class="s12">to</span><span class="s1">(</span><span class="s3">t</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>context.</span><span class="s12">moveTo</span><span class="s1">(</span><span class="s3">point.</span><span class="s12">x</span><span class="s3">, point.</span><span class="s12">y</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>while</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">t </span><span class="s1">&lt;</span><span class="s3"> Math.</span><span class="s12">PI</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">      </span>t += </span><span class="s6">0.01</span><span class="s8">; </span><span class="s3">// baby steps!</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>point = </span><span class="s12">to</span><span class="s1">(</span><span class="s3">t</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>context.</span><span class="s12">lineTo</span><span class="s1">(</span><span class="s3">point.</span><span class="s12">x</span><span class="s3">, point.</span><span class="s12">y</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>context.</span><span class="s12">closePath</span><span class="s1">()</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// create the fill</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>context.</span><span class="s12">fillStyle</span><span class="s3"> = </span><span class="s5">'#ea80b0'</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>context.</span><span class="s12">fill</span><span class="s1">()</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// create the image</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var image = </span><span class="s4"><b>new</b></span><span class="s3"> </span><span class="s12">Image</span><span class="s1">()</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>image.</span><span class="s12">src</span><span class="s3"> = canvas.</span><span class="s12">toDataURL</span><span class="s1">()</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>return</b></span><span class="s3"> image;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p4"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3">})()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3">// render that thing!</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3"><b>function</b></span><span class="s8"> </span><span class="s12">render</span><span class="s1">()</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// next animation frame</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">requestAnimationFrame</span><span class="s1">(</span><span class="s8">render</span><span class="s1">)</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// update time</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var newTime <span class="Apple-converted-space">  </span>= </span><span class="s4"><b>new</b></span><span class="s3"> </span><span class="s12">Date</span><span class="s1">()</span><span class="s3">.</span><span class="s12">getTime</span><span class="s1">()</span><span class="s3"> / </span><span class="s6">1000</span><span class="s3">,</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">        </span>deltaTime = newTime - </span><span class="s1">(</span><span class="s3">time </span><span class="s1">||</span><span class="s3"> newTime</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>time = newTime;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// clear canvas</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>context.</span><span class="s12">clearRect</span><span class="s1">(</span><span class="s6">0</span><span class="s3">, </span><span class="s6">0</span><span class="s3">, canvas.</span><span class="s12">width</span><span class="s3">, canvas.</span><span class="s12">height</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// create new particles</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>var amount = particleRate </span><span class="s1">*</span><span class="s3"> deltaTime;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s4"><b>for</b></span><span class="s3"> </span><span class="s1">(</span><span class="s3">var i = </span><span class="s6">0</span><span class="s3">; i </span><span class="s1">&lt;</span><span class="s3"> amount; i++</span><span class="s1">)</span><span class="s3"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>var pos = </span><span class="s12">pointOnHeart</span><span class="s1">(</span><span class="s3">Math.</span><span class="s12">PI</span><span class="s3"> - </span><span class="s6">2</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> Math.</span><span class="s12">PI</span><span class="s3"> </span><span class="s1">*</span><span class="s3"> Math.</span><span class="s12">random</span><span class="s1">())</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>var dir = pos.</span><span class="s12">clone</span><span class="s1">()</span><span class="s3">.</span><span class="s12">length</span><span class="s1">(</span><span class="s3">settings.</span><span class="s12">particles</span><span class="s3">.</span><span class="s12">velocity</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">      </span>particles.</span><span class="s12">add</span><span class="s1">(</span><span class="s3">canvas.</span><span class="s12">width</span><span class="s3"> / </span><span class="s6">2</span><span class="s3"> + pos.</span><span class="s12">x</span><span class="s3">, canvas.</span><span class="s12">height</span><span class="s3"> / </span><span class="s6">2</span><span class="s3"> - pos.</span><span class="s12">y</span><span class="s3">, dir.</span><span class="s12">x</span><span class="s3">, -dir.</span><span class="s12">y</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space">   </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">// update and draw particles</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>particles.</span><span class="s12">update</span><span class="s1">(</span><span class="s3">deltaTime</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>particles.</span><span class="s12">draw</span><span class="s1">(</span><span class="s3">context, image</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3">// handle (re-)sizing of the canvas</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p9"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3"><b>function</b></span><span class="s8"> </span><span class="s12">onResize</span><span class="s1">()</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>canvas.</span><span class="s12">width</span><span class="s3"><span class="Apple-converted-space">  </span>= canvas.</span><span class="s12">clientWidth</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">    </span>canvas.</span><span class="s12">height</span><span class="s3"> = canvas.</span><span class="s12">clientHeight</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span>window.</span><span class="s12">onresize</span><span class="s3"> = onResize;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p10"><span class="s3"><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p5"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3">// delay rendering bootstrap</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3">setTimeout</span><span class="s1">(</span><span class="s4"><b>function</b></span><span class="s1">()</span><span class="s8"> </span><span class="s1">{</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">onResize</span><span class="s1">()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s8"><span class="Apple-converted-space">    </span></span><span class="s3">render</span><span class="s1">()</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">}</span><span class="s3">, </span><span class="s6">10</span><span class="s1">)</span><span class="s3">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p7"><span class="s1">})(</span><span class="s8">document.</span><span class="s3">getElementById</span><span class="s1">(</span><span class="s5">'pinkboard'</span><span class="s1">))</span><span class="s8">;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space">  </span></span><span class="s1">&lt;</span><span class="s3">/script</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s3"><span class="Apple-converted-space"> </span></span><span class="s1">&lt;</span><span class="s3">/BODY</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p2"><span class="s3"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="baseline" class="td2">
        <p class="p3"><span class="s1">&lt;</span><span class="s3">/HTML</span><span class="s1">&gt;</span></p>
      </td>
    </tr>
  </tbody>
</table>
</body>
</html>
